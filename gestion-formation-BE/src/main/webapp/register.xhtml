<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html class="h-100" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <!-- Required meta tags -->
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"/>
        <link rel="stylesheet" href="css/signin.css"/>
        
        <!-- Vue.JS -->
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
        
        
        <style>

        </style>
        
        <title>Skill Reader </title>
    </h:head>

    <h:body class="text-center">
        <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
            <div id="app" class="alert alert-danger" :style="{ 'display': display }" role="alert">
                {{ error_message }}
            </div>

            <main class="form-signin">
                <h:form>
                    <h:graphicImage class="mb-4" width="72" height="72" name="img/hexagone.png" />
                    <h1 class="h3 mb-3 fw-normal">Créer un nouveau compte</h1>

                    <div class="form-floating" style="margin-top: 5px;">
                        <p:inputText class="form-control" id="name" value="#{addUser.name}" title="Name" />
                        <p:outputLabel value="Nom : " for="name" />
                    </div>

                    <div class="form-floating" style="margin-top: 5px;">
                        <p:inputText type="email" class="form-control" id="email" value="#{addUser.email}" title="Email" />
                        <p:outputLabel value="Email : " for="email" />
                    </div>

                    <div class="form-floating" style="margin-top: 5px;">
                        <p:inputText type="password" class="form-control" id="password" value="#{addUser.password}" title="Password" />
                        <p:outputLabel value="Mot de passe : " for="password" />
                    </div>

                    <h:commandButton class="w-100 btn btn-lg btn-primary" style="margin-top: 15px;" value='Confirmer' action="#{addUser.createUser}" />
                    <button class="w-100 btn btn-lg btn-primary" style="margin-top: 5px;" onclick="location.href = 'http://localhost:8080/projet/login.xhtml'">Connexion</button>
                    <p class="mt-5 mb-3 text-muted">&copy; 2021–2022</p>
                </h:form>
            </main>
        </div>

        <script>
            var app = new Vue({
                el: '#app',
                data: {
                    error_message: null,
                    display: "block"
                }
            });

            var test = new URL(location.href).searchParams.get('error');

            switch (test) {
                case '1':
                    app.error_message = "Il est nécessaire de remplir toutes les informations pour s'enregistrer.";
                    break;
                case '2':
                    app.error_message = "Une erreur interne est survenue. Merci de réessayer plus tard.";
                    break;
                default:
                    app.display = "none";
            }
        </script>
    </h:body>
</html>
